(this["webpackJsonpreact-quiz-test"]=this["webpackJsonpreact-quiz-test"]||[]).push([[0],{288:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(71),s=n.n(a),o=n(52),c=n(33),u=n(16),d=n(7),l=n(12),j=n(6),b=n(4),v=n.n(b),x=n(11),O=n(74),p=n(26),h=n.n(p),f=n(304),m=Object(O.a)((function(){var e=function(){var e=Object(x.a)(v.a.mark((function e(t){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/login",t);case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.user);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=Object(f.a)({key:"rqt-auth-state",defaultValue:JSON.stringify({isLoggedIn:!1,user:void 0})}),n=Object(j.a)(t,2),r=n[0],i=n[1],a=Object(u.useMutation)(e,{onSuccess:function(e){i(JSON.stringify({isLoggedIn:!0,user:e}))}}),s=JSON.parse(r),o=null===s||void 0===s?void 0:s.isLoggedIn,c=null===s||void 0===s?void 0:s.user;return Object(l.a)({isLoggedIn:o,user:c,handleLogout:function(){i(JSON.stringify({isLoggedIn:!1,user:void 0}))}},a)})),g=Object(j.a)(m,2),y=g[0],w=g[1],q=Object(O.a)((function(){var e=function(){var e=Object(x.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/question");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.useQuery)("questions",e)})),S=Object(j.a)(q,2),A=S[0],k=S[1],L=n(300),C=n(293),I=n(299),B=n(294),Q=n(296),P=n(301),N=n(17),z=n(38),M=n(21),E=n(2),J=M.a({username:M.b().required("Username is required"),password:M.b().required("Password is required")}).required(),F=function(){var e,t,n=Object(N.d)({resolver:Object(z.a)(J)}),r=n.register,i=n.handleSubmit,a=n.formState.errors,s=w(),o=s.mutateAsync,c=s.isLoggedIn,u=s.user,j=Object(d.g)(),b=function(){var e=Object(x.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(t);case 3:j("/",{replace:!0}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return c&&(null===u||void 0===u?void 0:u.role)?Object(E.jsx)(d.a,{to:"/"}):Object(E.jsx)(L.a,{children:Object(E.jsx)(C.a,{sx:{minHeight:"100vh",fontSize:"1.4rem"},children:Object(E.jsx)(I.a,{shadow:"sm",padding:"lg",children:Object(E.jsxs)("form",{onSubmit:i(b),children:[Object(E.jsx)(B.a,Object(l.a)({placeholder:"Your username",label:"Username",required:!0,error:null===a||void 0===a||null===(e=a.username)||void 0===e?void 0:e.message},r("username",{required:!0}))),Object(E.jsx)(Q.a,{h:"md"}),Object(E.jsx)(B.a,Object(l.a)({placeholder:"Your password",label:"Password",required:!0,error:null===a||void 0===a||null===(t=a.password)||void 0===t?void 0:t.message},r("password",{required:!0}))),Object(E.jsx)(Q.a,{h:"md"}),Object(E.jsx)(P.a,{variant:"filled",fullWidth:!0,type:"submit",children:"Submit"})]})})})})},U=n(77),T=n(302),K=function(){var e=w(),t=e.user,n=e.handleLogout;return Object(E.jsxs)(T.a,{position:"apart",children:[Object(E.jsxs)("h1",{children:["Welcome ",null===t||void 0===t?void 0:t.name]}),Object(E.jsx)(P.a,{color:"red",variant:"outline",onClick:n,children:"Logout"})]})},R=n(56),V=n(303),W=n(18),D=n.n(W),H=n(144),Y=n.n(H),G=n(297),X=n(298),Z=function(){var e=Object(u.useQueryClient)(),t=function(){var e=Object(x.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/question/".concat(null===t||void 0===t?void 0:t.questionId,"/answer"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.useMutation)(t,{mutationKey:"answer",onSuccess:function(t,n){e.invalidateQueries("questions")}})},$=M.a({text:M.b().required("Answer cannot be empty").min(3,"Answer should be atleast 3 characters long")}).required(),_=function(e){var t,n=e.question,r=Z(),i=r.mutateAsync,a=r.isLoading,s=Object(N.d)({resolver:Object(z.a)($)}),o=s.register,c=s.handleSubmit,u=s.reset,d=s.formState.errors,j=w().user,b=function(){var e=Object(x.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(Object(l.a)(Object(l.a)({},t),{},{questionId:null===n||void 0===n?void 0:n.id,submittedById:null===j||void 0===j?void 0:j.id}));case 2:u();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsx)(I.a,{radius:"lg",padding:"md",children:Object(E.jsxs)("form",{onSubmit:c(b),style:{position:"relative"},children:[Object(E.jsx)(G.a,{visible:a}),Object(E.jsx)(X.a,Object(l.a)({disabled:a,placeholder:"Post a Answer",label:"Type your Answer",required:!0,error:null===d||void 0===d||null===(t=d.text)||void 0===t?void 0:t.message,sx:{marginBottom:16}},o("text"))),Object(E.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(E.jsx)(P.a,{loading:a,disabled:a,type:"submit",children:"Submit Answer"})})]})})},ee=function(){var e=Object(u.useQueryClient)(),t=function(){var e=Object(x.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.put("/api/answer/".concat(null===t||void 0===t?void 0:t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.useMutation)(t,{mutationKey:"answer-edit",onSuccess:function(t,n){e.invalidateQueries("questions")}})},te=M.a({text:M.b().required("Answer cannot be empty").min(3,"Answer should be atleast 3 characters long")}).required(),ne=function(e){var t,n=e.answer,r=e.toggleEditMode,i=ee(),a=i.mutateAsync,s=i.isLoading,o=Object(N.d)({resolver:Object(z.a)(te),defaultValues:{text:null===n||void 0===n?void 0:n.text}}),c=o.register,u=o.handleSubmit,d=o.reset,j=o.formState.errors,b=function(){var e=Object(x.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Object(l.a)(Object(l.a)({},t),{},{id:null===n||void 0===n?void 0:n.id}));case 2:d(),r();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsxs)("form",{onSubmit:u(b),style:{position:"relative"},children:[Object(E.jsx)(X.a,Object(l.a)({disabled:s,placeholder:"Post a Answer",label:"Type your Answer",required:!0,defaultValue:null===n||void 0===n?void 0:n.text,error:null===j||void 0===j||null===(t=j.text)||void 0===t?void 0:t.message,sx:{marginBottom:16}},c("text"))),Object(E.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(E.jsx)(P.a,{compact:!0,loading:s,disabled:s,type:"submit",children:"Update Answer"})})]})},re=function(e){var t,n,i,a=e.ans,s=Object(c.c)(),o=w().user,u=Object(r.useState)(!1),d=Object(j.a)(u,2),l=d[0],b=d[1],v=function(){b((function(e){return!e}))};return Object(E.jsxs)(I.a,{withBorder:!0,padding:"md",sx:{margin:s.spacing.xs,backgroundColor:s.colors.gray[0]},children:[Object(E.jsxs)(T.a,{position:"apart",style:{marginBottom:s.spacing.xs},children:[Object(E.jsxs)(R.a,{color:"blue",children:["Answered by:"," ",Object(E.jsx)(R.a,{component:"strong",color:"blue",children:null===a||void 0===a||null===(t=a.submittedBy)||void 0===t?void 0:t.name})]}),(null===o||void 0===o?void 0:o.id)===(null===a||void 0===a||null===(n=a.submittedBy)||void 0===n?void 0:n.id)&&!l&&Object(E.jsx)(P.a,{variant:"outline",size:"xs",color:"orange",compact:!0,uppercase:!0,onClick:v,children:"Edit"})]}),l?Object(E.jsx)(ne,{answer:a,toggleEditMode:v}):Object(E.jsx)(R.a,{children:a.text}),Object(E.jsxs)(R.a,{size:"xs",children:[null===(i=D()(a.submittedAt))||void 0===i?void 0:i.toNow(!0)," ago"]})]},null===a||void 0===a?void 0:a.id)};D.a.extend(Y.a);var ie=function(e){var t,n,r,i,a=e.question,s=Object(c.c)(),o=w().user;return Object(E.jsxs)(I.a,{padding:"lg",radius:"lg",shadow:"md",sx:{marginBottom:s.spacing.lg},children:[Object(E.jsxs)(T.a,{position:"apart",style:{marginBottom:s.spacing.xs},children:[Object(E.jsxs)(R.a,{size:"xl",weight:700,children:["Q: ",a.text]}),Object(E.jsxs)(R.a,{size:"xs",children:[null===(t=D()(a.createdAt))||void 0===t?void 0:t.toNow(!0)," ago"]})]}),Object(E.jsx)(V.a,{my:"sm",label:(null===a||void 0===a||null===(n=a.answers)||void 0===n?void 0:n.length)?"".concat(null===a||void 0===a||null===(r=a.answers)||void 0===r?void 0:r.length," answers posted"):"No answer posted yet!",labelPosition:"center"}),null===a||void 0===a||null===(i=a.answers)||void 0===i?void 0:i.map((function(e){return Object(E.jsx)(I.a.Section,{children:Object(E.jsx)(re,{ans:e})},e.id)})),"USER"===(null===o||void 0===o?void 0:o.role)&&Object(E.jsx)(I.a.Section,{children:Object(E.jsx)(_,{question:a})})]})},ae=function(){var e=Object(u.useQueryClient)(),t=function(){var e=Object(x.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/question",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.useMutation)(t,{mutationKey:"question",onSuccess:function(){e.invalidateQueries("questions")}})},se=M.a({text:M.b().required("Question cannot be empty").min(10,"Question should be atleast 10 characters long")}).required(),oe=function(){var e,t=Object(c.c)(),n=ae(),r=n.mutateAsync,i=n.isLoading,a=Object(N.d)({resolver:Object(z.a)(se)}),s=a.register,o=a.handleSubmit,u=a.reset,d=a.formState.errors,j=w().user,b=function(){var e=Object(x.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(Object(l.a)(Object(l.a)({},t),{},{creatorId:null===j||void 0===j?void 0:j.id}));case 2:u();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsx)(I.a,{radius:"lg",shadow:"md",sx:{marginBottom:t.spacing.lg},children:Object(E.jsxs)("form",{onSubmit:o(b),style:{position:"relative"},children:[Object(E.jsx)(G.a,{visible:i}),Object(E.jsx)(X.a,Object(l.a)({disabled:i,placeholder:"Write your question...",label:"Post a question",required:!0,error:null===d||void 0===d||null===(e=d.text)||void 0===e?void 0:e.message,sx:{marginBottom:16}},s("text"))),Object(E.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(E.jsx)(P.a,{loading:i,disabled:i,type:"submit",children:"Post Question"})})]})})},ce=function(){var e,t=k(),n=t.data,r=t.isLoading;return Object(E.jsxs)(L.a,{children:[Object(E.jsx)(K,{}),Object(E.jsx)(oe,{}),r&&Object(E.jsx)(C.a,{children:Object(E.jsx)(U.a,{variant:"bars"})}),null===n||void 0===n||null===(e=n.questions)||void 0===e?void 0:e.map((function(e){return Object(E.jsx)(ie,{question:e},e.id)}))]})},ue=function(){var e,t=k(),n=t.data,r=t.isLoading;return Object(E.jsxs)(L.a,{children:[Object(E.jsx)(K,{}),r&&Object(E.jsx)(C.a,{children:Object(E.jsx)(U.a,{variant:"bars"})}),null===n||void 0===n||null===(e=n.questions)||void 0===e?void 0:e.map((function(e){return Object(E.jsx)(ie,{question:e},e.id)}))]})},de=function(){var e=w(),t=e.user;return e.isLoggedIn||(null===t||void 0===t?void 0:t.role)?"ADMIN"===(null===t||void 0===t?void 0:t.role)?Object(E.jsx)(ce,{}):"USER"===(null===t||void 0===t?void 0:t.role)?Object(E.jsx)(ue,{}):null:Object(E.jsx)(d.a,{to:"/login"})};var le=function(){return Object(E.jsx)(y,{children:Object(E.jsx)(A,{children:Object(E.jsx)("div",{style:{minHeight:"100vh",backgroundColor:"rgb(248, 249, 250)"},children:Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.b,{path:"/login",element:Object(E.jsx)(F,{})}),Object(E.jsx)(d.b,{path:"/",element:Object(E.jsx)(de,{})})]})})})})},je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,305)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),a(e),s(e)}))};n(22);var be=new u.QueryClient;s.a.render(Object(E.jsx)(i.a.StrictMode,{children:Object(E.jsx)(o.a,{children:Object(E.jsx)(u.QueryClientProvider,{client:be,children:Object(E.jsx)(c.a,{theme:{fontFamily:"Roboto, sans-serif"},withNormalizeCSS:!0,withGlobalStyles:!0,children:Object(E.jsx)(le,{})})})})}),document.getElementById("root")),je()}},[[288,1,2]]]);
//# sourceMappingURL=main.2f2f0f32.chunk.js.map